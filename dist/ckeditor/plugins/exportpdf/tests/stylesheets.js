bender.loadExternalPlugin("exportpdf","/apps/plugin/"),CKEDITOR.plugins.load("exportpdf",(function(){function e(e){var t=exportPdfUtils.getDefaultConfig("unit",e.extraConfig||{});bender.editorBot.create({name:"editor"+Date.now(),config:t,creator:e.creator},(function(t){var s=t.editor;t.setHtmlWithSelection(e.initialHtml),s.once("exportPdf",(function(t){assert.areEqual(e.initialHtml,t.data.html)}),null,null,10),s.once("exportPdf",(function(t){t.cancel(),e.expectCss?assert.isNotUndefined(t.data.css,"Some CSS should be sent."):assert.isUndefined(t.data.css,"No CSS should be sent."),t=t.data.html.replace(/\?t=[a-z0-9]+/gi,""),assert.areEqual(e.expectedHtml,t,"HTML is incorrect.")}),null,null,16),s.execCommand("exportPdf")}))}bender.test({setUp:function(){bender.tools.ignoreUnsupportedEnvironment("exportpdf")},"test no custom stylesheets attached to divarea editor":function(){e({creator:"replace",initialHtml:'<p id="test">Hello, World!</p>',expectedHtml:'<div class="cke_editable cke_contents_ltr"><p id="test">Hello, World!</p></div>',expectCss:!1})},"test one absolute path custom stylesheet attached to divarea editor":function(){e({creator:"replace",initialHtml:'<p id="test">Hello, World!</p>',expectedHtml:'<link type="text/css" rel=stylesheet href="https://ckeditor.com/"><div class="cke_editable cke_contents_ltr"><p id="test">Hello, World!</p></div>',expectCss:!1,extraConfig:{exportPdf_stylesheets:["https://ckeditor.com"]}})},"test two absolute path custom stylesheets attached to divarea editor":function(){e({creator:"replace",initialHtml:'<p id="test">Hello, World!</p>',expectedHtml:'<link type="text/css" rel=stylesheet href="https://ckeditor.css/"><link type="text/css" rel=stylesheet href="https://cksource.css/"><div class="cke_editable cke_contents_ltr"><p id="test">Hello, World!</p></div>',expectCss:!1,extraConfig:{exportPdf_stylesheets:["https://ckeditor.css","https://cksource.css"]}})},"test one relative path custom stylesheet attached to divarea editor":function(){e({creator:"replace",initialHtml:'<p id="test">Hello, World!</p>',expectedHtml:'<link type="text/css" rel=stylesheet href="'+exportPdfUtils.toAbsoluteUrl("/css/ckeditor.css")+'"><div class="cke_editable cke_contents_ltr"><p id="test">Hello, World!</p></div>',expectCss:!1,extraConfig:{exportPdf_stylesheets:["/css/ckeditor.css"]}})},"test two relative path custom stylesheets attached to divarea editor":function(){e({creator:"replace",initialHtml:'<p id="test">Hello, World!</p>',expectedHtml:'<link type="text/css" rel=stylesheet href="'+exportPdfUtils.toAbsoluteUrl("/css/ckeditor.css")+'"><link type="text/css" rel=stylesheet href="'+exportPdfUtils.toAbsoluteUrl("/css/cksource.css")+'"><div class="cke_editable cke_contents_ltr"><p id="test">Hello, World!</p></div>',expectCss:!1,extraConfig:{exportPdf_stylesheets:["/css/ckeditor.css","/css/cksource.css"]}})},"test one relative and one absolute path custom stylesheets attached to divarea editor":function(){e({creator:"replace",initialHtml:'<p id="test">Hello, World!</p>',expectedHtml:'<link type="text/css" rel=stylesheet href="'+exportPdfUtils.toAbsoluteUrl("/css/ckeditor.css")+'"><link type="text/css" rel=stylesheet href="https://ckeditor.com/"><div class="cke_editable cke_contents_ltr"><p id="test">Hello, World!</p></div>',expectCss:!1,extraConfig:{exportPdf_stylesheets:["/css/ckeditor.css","https://ckeditor.com"]}})},"test no custom stylesheets attached to inline editor":function(){e({creator:"inline",initialHtml:'<p id="test">Hello, World!</p>',expectedHtml:'<div class="cke_editable cke_contents_ltr"><p id="test">Hello, World!</p></div>',expectCss:!1})},"test one absolute path custom stylesheet attached to inline editor":function(){e({creator:"inline",initialHtml:'<p id="test">Hello, World!</p>',expectedHtml:'<link type="text/css" rel=stylesheet href="https://ckeditor.com/"><div class="cke_editable cke_contents_ltr"><p id="test">Hello, World!</p></div>',expectCss:!1,extraConfig:{exportPdf_stylesheets:["https://ckeditor.com"]}})},"test two absolute path custom stylesheets attached to inline editor":function(){e({creator:"inline",initialHtml:'<p id="test">Hello, World!</p>',expectedHtml:'<link type="text/css" rel=stylesheet href="https://ckeditor.css/"><link type="text/css" rel=stylesheet href="https://cksource.css/"><div class="cke_editable cke_contents_ltr"><p id="test">Hello, World!</p></div>',expectCss:!1,extraConfig:{exportPdf_stylesheets:["https://ckeditor.css","https://cksource.css"]}})},"test one relative path custom stylesheet attached to inline editor":function(){e({creator:"inline",initialHtml:'<p id="test">Hello, World!</p>',expectedHtml:'<link type="text/css" rel=stylesheet href="'+exportPdfUtils.toAbsoluteUrl("/css/ckeditor.css")+'"><div class="cke_editable cke_contents_ltr"><p id="test">Hello, World!</p></div>',expectCss:!1,extraConfig:{exportPdf_stylesheets:["/css/ckeditor.css"]}})},"test two relative path custom stylesheets attached to inline editor":function(){e({creator:"inline",initialHtml:'<p id="test">Hello, World!</p>',expectedHtml:'<link type="text/css" rel=stylesheet href="'+exportPdfUtils.toAbsoluteUrl("/css/ckeditor.css")+'"><link type="text/css" rel=stylesheet href="'+exportPdfUtils.toAbsoluteUrl("/css/cksource.css")+'"><div class="cke_editable cke_contents_ltr"><p id="test">Hello, World!</p></div>',expectCss:!1,extraConfig:{exportPdf_stylesheets:["/css/ckeditor.css","/css/cksource.css"]}})},"test one relative and one absolute path custom stylesheets attached to inline editor":function(){e({creator:"inline",initialHtml:'<p id="test">Hello, World!</p>',expectedHtml:'<link type="text/css" rel=stylesheet href="'+exportPdfUtils.toAbsoluteUrl("/css/ckeditor.css")+'"><link type="text/css" rel=stylesheet href="https://ckeditor.com/"><div class="cke_editable cke_contents_ltr"><p id="test">Hello, World!</p></div>',expectCss:!1,extraConfig:{exportPdf_stylesheets:["/css/ckeditor.css","https://ckeditor.com"]}})},"test no custom stylesheets attached to classic editor":function(){e({creator:"replace",initialHtml:'<p id="test">Hello, World!</p>',expectedHtml:'<div class="cke_editable cke_contents_ltr"><p id="test">Hello, World!</p></div>',expectCss:!0,extraConfig:{removePlugins:"divarea"}})},"test one absolute path custom stylesheet attached to classic editor":function(){e({creator:"replace",initialHtml:'<p id="test">Hello, World!</p>',expectedHtml:'<link type="text/css" rel=stylesheet href="https://ckeditor.com/"><div class="cke_editable cke_contents_ltr"><p id="test">Hello, World!</p></div>',expectCss:!1,extraConfig:{removePlugins:"divarea",exportPdf_stylesheets:["https://ckeditor.com"]}})},"test two absolute path custom stylesheets attached to classic editor":function(){e({creator:"replace",initialHtml:'<p id="test">Hello, World!</p>',expectedHtml:'<link type="text/css" rel=stylesheet href="https://ckeditor.css/"><link type="text/css" rel=stylesheet href="https://cksource.css/"><div class="cke_editable cke_contents_ltr"><p id="test">Hello, World!</p></div>',expectCss:!1,extraConfig:{removePlugins:"divarea",exportPdf_stylesheets:["https://ckeditor.css","https://cksource.css"]}})},"test one relative path custom stylesheet attached to classic editor":function(){e({creator:"replace",initialHtml:'<p id="test">Hello, World!</p>',expectedHtml:'<link type="text/css" rel=stylesheet href="'+exportPdfUtils.toAbsoluteUrl("/css/ckeditor.css")+'"><div class="cke_editable cke_contents_ltr"><p id="test">Hello, World!</p></div>',expectCss:!1,extraConfig:{removePlugins:"divarea",exportPdf_stylesheets:["/css/ckeditor.css"]}})},"test two relative path custom stylesheets attached to classic editor":function(){e({creator:"replace",initialHtml:'<p id="test">Hello, World!</p>',expectedHtml:'<link type="text/css" rel=stylesheet href="'+exportPdfUtils.toAbsoluteUrl("/css/ckeditor.css")+'"><link type="text/css" rel=stylesheet href="'+exportPdfUtils.toAbsoluteUrl("/css/cksource.css")+'"><div class="cke_editable cke_contents_ltr"><p id="test">Hello, World!</p></div>',expectCss:!1,extraConfig:{removePlugins:"divarea",exportPdf_stylesheets:["/css/ckeditor.css","/css/cksource.css"]}})},"test one relative and one absolute path custom stylesheets attached to classic editor":function(){e({creator:"replace",initialHtml:'<p id="test">Hello, World!</p>',expectedHtml:'<link type="text/css" rel=stylesheet href="'+exportPdfUtils.toAbsoluteUrl("/css/ckeditor.css")+'"><link type="text/css" rel=stylesheet href="https://ckeditor.com/"><div class="cke_editable cke_contents_ltr"><p id="test">Hello, World!</p></div>',expectCss:!1,extraConfig:{removePlugins:"divarea",exportPdf_stylesheets:["/css/ckeditor.css","https://ckeditor.com"]}})}})}));