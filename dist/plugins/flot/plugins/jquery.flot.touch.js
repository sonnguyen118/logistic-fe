!function(t){"use strict";function e(t,e){var n,o={twoTouches:!1,currentTapStart:{x:0,y:0},currentTapEnd:{x:0,y:0},prevTap:{x:0,y:0},currentTap:{x:0,y:0},interceptedLongTap:!1,isUnsupportedGesture:!1,prevTapTime:null,tapStartTime:null,longTapTriggerId:null},a=20,r=500;function u(e){var u=t.getOptions();(u.pan.active||u.zoom.active)&&(function(t){t.touches.length>=3?o.isUnsupportedGesture=!0:o.isUnsupportedGesture=!1}(e),n.dispatchEvent(new CustomEvent("touchevent",{detail:e})),m(e)?p(e,"pinch"):(p(e,"pan"),l(e)||(function(t){var e=(new Date).getTime(),n=e-o.prevTapTime;return n>=0&&n<r&&v(o.prevTap.x,o.prevTap.y,o.currentTap.x,o.currentTap.y)<a?(t.firstTouch=o.prevTap,t.secondTouch=o.currentTap,!0):(o.prevTapTime=e,!1)}(e)&&p(e,"doubleTap"),p(e,"tap"),p(e,"longTap"))))}function p(t,e){switch(e){case"pan":c[t.type](t);break;case"pinch":i[t.type](t);break;case"doubleTap":s.onDoubleTap(t);break;case"longTap":T[t.type](t);break;case"tap":d[t.type](t)}}var c={touchstart:function(t){o.prevTap={x:o.currentTap.x,y:o.currentTap.y},h(t),function(t){o.tapStartTime=(new Date).getTime(),o.interceptedLongTap=!1,o.currentTapStart={x:t.touches[0].pageX,y:t.touches[0].pageY},o.currentTapEnd={x:t.touches[0].pageX,y:t.touches[0].pageY}}(t),n.dispatchEvent(new CustomEvent("panstart",{detail:t}))},touchmove:function(t){g(t),h(t),function(t){o.currentTapEnd={x:t.touches[0].pageX,y:t.touches[0].pageY}}(t),o.isUnsupportedGesture||n.dispatchEvent(new CustomEvent("pandrag",{detail:t}))},touchend:function(t){g(t),l(t)?(n.dispatchEvent(new CustomEvent("pinchend",{detail:t})),n.dispatchEvent(new CustomEvent("panstart",{detail:t}))):function(t){return t.touches&&0===t.touches.length}(t)&&n.dispatchEvent(new CustomEvent("panend",{detail:t}))}},i={touchstart:function(t){n.dispatchEvent(new CustomEvent("pinchstart",{detail:t}))},touchmove:function(t){g(t),o.twoTouches=m(t),o.isUnsupportedGesture||n.dispatchEvent(new CustomEvent("pinchdrag",{detail:t}))},touchend:function(t){g(t)}},s={onDoubleTap:function(t){g(t),n.dispatchEvent(new CustomEvent("doubletap",{detail:t}))}},T={touchstart:function(t){T.waitForLongTap(t)},touchmove:function(t){},touchend:function(t){o.longTapTriggerId&&(clearTimeout(o.longTapTriggerId),o.longTapTriggerId=null)},isLongTap:function(t){return(new Date).getTime()-o.tapStartTime>=1500&&!o.interceptedLongTap&&v(o.currentTapStart.x,o.currentTapStart.y,o.currentTapEnd.x,o.currentTapEnd.y)<20&&(o.interceptedLongTap=!0,!0)},waitForLongTap:function(t){o.longTapTriggerId||(o.longTapTriggerId=setTimeout((function(){T.isLongTap(t)&&n.dispatchEvent(new CustomEvent("longtap",{detail:t})),o.longTapTriggerId=null}),1500))}},d={touchstart:function(t){o.tapStartTime=(new Date).getTime()},touchmove:function(t){},touchend:function(t){d.isTap(t)&&(n.dispatchEvent(new CustomEvent("tap",{detail:t})),g(t))},isTap:function(t){return(new Date).getTime()-o.tapStartTime<=125&&v(o.currentTapStart.x,o.currentTapStart.y,o.currentTapEnd.x,o.currentTapEnd.y)<20}};function h(t){o.currentTap={x:t.touches[0].pageX,y:t.touches[0].pageY}}function g(e){o.isUnsupportedGesture||(e.preventDefault(),t.getOptions().propagateSupportedGesture||e.stopPropagation())}function v(t,e,n,o){return Math.sqrt((t-n)*(t-n)+(e-o)*(e-o))}function l(t){return o.twoTouches&&1===t.touches.length}function m(e){return!!(e.touches&&e.touches.length>=2&&e.touches[0].target===t.getEventHolder()&&e.touches[1].target===t.getEventHolder())}(!0===e.pan.enableTouch||e.zoom.enableTouch)&&(t.hooks.bindEvents.push((function(t,e){n=e[0],e[0].addEventListener("touchstart",u,!1),e[0].addEventListener("touchmove",u,!1),e[0].addEventListener("touchend",u,!1)})),t.hooks.shutdown.push((function(t,e){e[0].removeEventListener("touchstart",u),e[0].removeEventListener("touchmove",u),e[0].removeEventListener("touchend",u),o.longTapTriggerId&&(clearTimeout(o.longTapTriggerId),o.longTapTriggerId=null)})))}jQuery.plot.plugins.push({init:function(t){t.hooks.processOptions.push(e)},options:{propagateSupportedGesture:!1},name:"navigateTouch",version:"0.3"})}();